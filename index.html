<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
	<script src="aframe-sun-sky.js"></script>

  </head>
  <body>
  <script>
      AFRAME.registerComponent('sun-position-setter', {
        init: function () {
          var skyEl = this.el;
          var orbitEl = this.el.sceneEl.querySelector('#orbit');

          orbitEl.addEventListener('componentchanged', function changeSun (evt) {
            var sunPosition;
            var phi;
            var theta;

            if (evt.detail.name !== 'rotation') { return; }

            sunPosition = orbitEl.getAttribute('rotation');

            if(sunPosition === null) { return; }

            theta = Math.PI * (- 0.5);
            phi = 2 * Math.PI * (sunPosition.y / 360 - 0.5);
            skyEl.setAttribute('material', 'sunPosition', {
              x: Math.cos(phi),
              y: Math.sin(phi) * Math.sin(theta),
              z: -1
            });
          });
        }
      });
    </script>
    <a-scene>
	<a-assets>
	<a-asset-item id="island" src="flyingIslands.gltf"></a-asset-item>
	<img id="logo" src="img/ivarwhite.png">
	<img id="groundTexture" src="textures/wooden-floor.jpg">
   <img id="wallTexture" src="img/norway_fjord-wide.jpg">
	<img id="skyTexture" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg">

  </a-assets>
  

  
  
  <a-entity gltf-model="#island"></a-entity>
  
  <!-- TEXT and LOGO -->
  <a-image src="#logo" position="0 2.5 -4.9" scale="10 10 10"></a-image>
  
  <a-text value="Hello, fucktards! Testa att walka runt med WASD-knapparna" color="#BBB"
        position="-3 0.3 -3" scale="1 1 1"></a-text>
		
		
  
  <!-- TESTBOX -->
 
  
	<a-box position="4 0.25 -4" color="brown" rotation="0 0 0" scale="0.5 0.5 0.5">
		<a-animation attribute="position" to="4 0.26 -4" direction="alternate" dur="2000"
      repeat="indefinite"></a-animation>
	  <a-animation attribute="scale" begin="mouseenter" dur="300" to="0.6 0.6 0.6"></a-animation>
  <a-animation attribute="scale" begin="mouseleave" dur="300" to="0.5 0.5 0.5"></a-animation>
  
</a-box>

	</a-box>
	
	<!-- SOUND SPOT -->
	<!-- <a-sound src="https://cdn.aframe.io/basic-guide/audio/backgroundnoise.wav" autoplay="true" position="-3 2 -5"></a-sound> -->
	
	<!--SKY AND ROOM SETUP-->
	<a-sun-sky material="sunPosition: -0.2 0.5 -5"></a-sun-sky>
	<!--<a-sky src="#skyTexture"></a-sky>-->
	<a-plane material="opacity: 0.950" src="#groundTexture" rotation="-90 0 0" width="10" height="10"></a-plane>
	
	<!-- WALL -->
	<!-- 
	<a-plane  src="#wallTexture" position="0 2.5 -5" rotation="0 0 0" width="10" height="5"></a-plane>
	<a-plane material="opacity: 0.550" color=#ccc position="-5 2.5 0" rotation="0 90 0" width="10" height="5"></a-plane>
	<a-plane material="opacity: 0.550" color=#ccc position="5 2.5 0" rotation="0 270 0" width="10" height="5"></a-plane>
	<a-plane material="opacity: 0.550" color=#ccc position="0 2.5 5" rotation="0 180 0" width="10" height="5"></a-plane> 
	-->
	
	<!-- SUN -->
	<a-sun-sky sun-position-setter>
        <a-entity id="orbit">
          <a-animation attribute="rotation" from="0 0 0" to="0 360 0" dur="1000000"
                       repeat="indefinite" easing="linear"></a-animation>
        </a-entity>
      </a-sun-sky>
	
	<!-- LIGHTING -->
	<a-light type="ambient" color="#445451"></a-light>
  <a-light type="point" intensity="2" light="angle:52.54;decay:4.42;intensity:0.94;type:point;target:null" position="0 3 0"></a-light>
  
  
  
  <!-- CAMERA -->
  <a-camera
    <a-cursor></a-cursor>
	
  </a-camera>
    </a-scene>
  <body>
</html>
